<!DOCTYPE html>
<html>
<head>
    <title>公式编辑器</title>
    <meta charset="UTF-8">
    <script src="dev-lib/kitygraph.all.js"></script>
    <script src="dev-lib/kity-formula.all.js"></script>
    <script src="dev-lib/kityformula-parser.all.js"></script>
    <script src="dev-lib/dev-define.js"></script>
    <script>
        inc.config({
            base: './src'
        });
    </script>
    <script src="dev-lib/exports.js"></script>
    <script src="dev-lib/dev-start.js"></script>
    <script>
        window.onload = function () {

            var KFEditor = kf.Editor;

            var editor = new KFEditor( document.getElementById( "kfEditorContainer" ) );

            editor.execCommand( 'render', 'a+b-c-\\frac{}{}' );

            var evt = editor.request( "ui.canvas.container.event" );

            evt.on( "mousedown", function ( e ) {

                var target = e.target,
                    group = getGroup( target );

                console.log(group)


            } );

            function getGroup ( node ) {

                var tagName = null;

                node = node.parentNode;
                tagName = node.tagName.toLowerCase();

                if ( node && tagName !== "body" && tagName !== "svg" ) {

                    if ( node.getAttribute( "data-type" ) === "kf-editor-group" ) {
                        return node;
                    }

                    return getGroup( node );

                } else {
                    return null;
                }

            }

        };
    </script>
    <link rel="stylesheet" href="assets/styles/page.css">
    <link rel="stylesheet" href="assets/styles/base.css">
</head>
<body>
    <div id="kfEditorContainer" class="kf-editor"></div>
</body>
</html>