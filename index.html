<!DOCTYPE html>
<html>
<head>
    <title>公式编辑器</title>
    <meta charset="UTF-8">
    <script src="dev-lib/kitygraph.all.js"></script>
    <script src="dev-lib/kity-formula.all.js"></script>
    <script src="dev-lib/kityformula-parser.all.js"></script>
    <script src="dev-lib/sea-debug.js"></script>
    <script>

        seajs.config( {
            base: "./src"
        } );

    </script>
    <script>

        define( 'start', function ( require ) {

            var Editor = require( "editor/editor" ),
                editor = new Editor( document.getElementsByClassName( "kf-editor-container" )[ 0 ], {
                    formula: {
                        fontsize: 30
                    }
                } );

//            initCapture();

            var currentLatexStr = 'a+b-3\\div 4 + c = \\sqrt[]{} ';

            editor.render( currentLatexStr );

        } );

        window.onload = function () {

            seajs.use( 'start' );

        };

        function initCapture () {

            document.getElementsByTagName( "svg" )[0].onmousedown = function ( e ) {

                var group = getGroup( e.target );

                debugger;

            };

        }

        function getGroup ( node ) {

            var tagName = node.tagName.toLowerCase();

            if ( tagName === "svg" ) {
                return null;
            }

            if ( tagName === "g" && node.getAttribute( "data-type" ) === "kf-editor-group" ) {
                return node;
            } else {
                return getGroup( node.parentNode );
            }

        }

    </script>
    <link rel="stylesheet" href="assets/styles/page.css">
    <link rel="stylesheet" href="assets/styles/base.css">
</head>
<body>
    <div class="kf-editor">
        <div class="kf-editor-toolbar"></div>
        <div class="kf-editor-container"></div>
    </div>
</body>
</html>